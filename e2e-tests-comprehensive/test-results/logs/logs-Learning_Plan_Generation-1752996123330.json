{
  "phase": "Learning_Plan_Generation",
  "error": "Expected 2-4 questions, found 0",
  "stack": "Error: Expected 2-4 questions, found 0\n    at /Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/complete-e2e-flow-test.spec.ts:358:15\n    at E2ETestOrchestrator.executePhase (/Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/complete-e2e-flow-test.spec.ts:150:7)\n    at E2ETestOrchestrator.phase3_LearningPlan (/Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/complete-e2e-flow-test.spec.ts:327:5)\n    at E2ETestOrchestrator.executeCompleteFlow (/Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/complete-e2e-flow-test.spec.ts:715:7)\n    at /Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/complete-e2e-flow-test.spec.ts:735:7\n    at /Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/node_modules/playwright/lib/worker/workerMain.js:304:9\n    at /Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/node_modules/playwright/lib/worker/testInfo.js:289:11\n    at TimeoutManager.withRunnable (/Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/node_modules/playwright/lib/worker/timeoutManager.js:67:14)\n    at TestInfoImpl._runWithTimeout (/Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/node_modules/playwright/lib/worker/testInfo.js:287:7)\n    at /Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/node_modules/playwright/lib/worker/workerMain.js:302:7\n    at WorkerMain._runTest (/Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/node_modules/playwright/lib/worker/workerMain.js:277:5)\n    at WorkerMain.runTestGroup (/Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/node_modules/playwright/lib/worker/workerMain.js:193:11)\n    at process.<anonymous> (/Users/wetom/Desktop/FocusFlow/e2e-tests-comprehensive/node_modules/playwright/lib/common/process.js:65:22)",
  "consoleLogs": [
    "[2025-07-20T07:21:58.015Z] info: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold",
    "[2025-07-20T07:21:58.052Z] log: Running application \"main\" with appParams:\n {rootTag: #root, hydrate: undefined} \nDevelopment-level warnings: ON.\nPerformance optimizations: OFF.",
    "[2025-07-20T07:21:58.176Z] warning: \"shadow*\" style props are deprecated. Use \"boxShadow\".",
    "[2025-07-20T07:21:58.201Z] log: i18n initialized with language: en",
    "[2025-07-20T07:21:58.235Z] warning: props.pointerEvents is deprecated. Use style.pointerEvents",
    "[2025-07-20T07:21:58.676Z] log: All 3 scheduled task records are valid",
    "[2025-07-20T07:21:59.008Z] info: %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold",
    "[2025-07-20T07:21:59.017Z] log: Running application \"main\" with appParams:\n {rootTag: #root, hydrate: undefined} \nDevelopment-level warnings: ON.\nPerformance optimizations: OFF.",
    "[2025-07-20T07:21:59.137Z] warning: \"shadow*\" style props are deprecated. Use \"boxShadow\".",
    "[2025-07-20T07:21:59.138Z] log: i18n initialized with language: en",
    "[2025-07-20T07:21:59.139Z] warning: props.pointerEvents is deprecated. Use style.pointerEvents",
    "[2025-07-20T07:21:59.139Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:21:59.139Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:21:59.146Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:21:59.146Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:21:59.606Z] log: All 3 scheduled task records are valid",
    "[2025-07-20T07:22:00.032Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:22:00.032Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:22:00.054Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:22:00.054Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:22:00.158Z] log: 🚀 Using unified learning plan generation...",
    "[2025-07-20T07:22:00.159Z] log: 📋 第一階段：請求個人化問題...",
    "[2025-07-20T07:22:00.159Z] log: 🚀 [JOB-API] Submitting learning_plan job...",
    "[2025-07-20T07:22:00.159Z] log: 🌐 [API-REQUEST] 開始網路請求",
    "[2025-07-20T07:22:00.160Z] log: 🌐 [API-REQUEST] Platform: web",
    "[2025-07-20T07:22:00.160Z] log: 🌐 [API-REQUEST] __DEV__: true",
    "[2025-07-20T07:22:00.161Z] log: 🌐 [API-REQUEST] API_BASE_URL: http://localhost:8080/api",
    "[2025-07-20T07:22:00.165Z] log: 🌐 [API-REQUEST] Full URL: http://localhost:8080/api/jobs",
    "[2025-07-20T07:22:00.165Z] log: 🌐 [API-REQUEST] Method: POST",
    "[2025-07-20T07:22:00.165Z] log: 🌐 [API-REQUEST] Body: {\"type\":\"learning_plan\",\"params\":{\"title\":\"學習 Python 程式設計\",\"description\":\"我想要從零開始學習 Python 程式設計，目標是能夠開發網頁應用程式。希望能夠掌握基礎語法、數據處理和 Web 框架。\",\"language\":\"en\",\"taskType\":\"skill_learning\",\"currentProficiency\":\"beginner\",\"targetProficiency\":\"intermediate\"},\"options\":{}}",
    "[2025-07-20T07:22:00.165Z] log: 🌐 [API-REQUEST] 發送 fetch 請求...",
    "[2025-07-20T07:22:00.167Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:22:00.167Z] error: Unexpected text node: . A text node cannot be a child of a <View>.",
    "[2025-07-20T07:22:00.210Z] log: 🌐 [API-REQUEST] 收到回應",
    "[2025-07-20T07:22:00.210Z] log: 🌐 [API-REQUEST] Status: 202",
    "[2025-07-20T07:22:00.210Z] log: 🌐 [API-REQUEST] Status Text: Accepted",
    "[2025-07-20T07:22:00.211Z] log: 🌐 [API-REQUEST] Response text length: 255",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] 成功收到資料",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] Response keys: [jobId, type, status, estimatedDuration, message, pollEndpoint, createdAt]",
    "[2025-07-20T07:22:00.213Z] log: ✅ [JOB-API] Job submitted successfully: 61397c8b-9d9c-4b73-bbe4-25247eb5c23f",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] 開始網路請求",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] Platform: web",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] __DEV__: true",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] API_BASE_URL: http://localhost:8080/api",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] Full URL: http://localhost:8080/api/jobs/61397c8b-9d9c-4b73-bbe4-25247eb5c23f",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] Method: GET",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] Body: none",
    "[2025-07-20T07:22:00.213Z] log: 🌐 [API-REQUEST] 發送 fetch 請求...",
    "[2025-07-20T07:22:00.242Z] error: Failed to load resource: net::ERR_CONNECTION_REFUSED",
    "[2025-07-20T07:22:00.242Z] error: 🌐 [API-REQUEST] 網路錯誤詳情: TypeError: Failed to fetch\n    at apiRequest (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210726:30)\n    at pollJobStatus (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210845:30)\n    at pollUntilComplete (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210891:30)\n    at generateUnifiedLearningPlan (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:211061:31)\n    at async handleSmartGenerate (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:207347:33)",
    "[2025-07-20T07:22:00.242Z] error: 🌐 [API-REQUEST] Error type: TypeError",
    "[2025-07-20T07:22:00.242Z] error: 🌐 [API-REQUEST] Error message: Failed to fetch",
    "[2025-07-20T07:22:00.242Z] error: 🌐 [API-REQUEST] TypeError - 可能是網路連線問題",
    "[2025-07-20T07:22:00.242Z] error: ❌ [JOB-API] Failed to poll job 61397c8b-9d9c-4b73-bbe4-25247eb5c23f (attempt 1): ApiError: Network connection error\n    at apiRequest (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210791:15)\n    at async pollJobStatus (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210845:24)\n    at async pollUntilComplete (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210891:24)\n    at async generateUnifiedLearningPlan (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:211061:25)\n    at async handleSmartGenerate (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:207347:33)",
    "[2025-07-20T07:22:00.242Z] warning: ⚠️ [JOB-API] Poll attempt 1 failed for job 61397c8b-9d9c-4b73-bbe4-25247eb5c23f: ApiError: Network connection error\n    at apiRequest (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210791:15)\n    at async pollJobStatus (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210845:24)\n    at async pollUntilComplete (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210891:24)\n    at async generateUnifiedLearningPlan (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:211061:25)\n    at async handleSmartGenerate (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:207347:33)",
    "[2025-07-20T07:22:03.244Z] log: 🌐 [API-REQUEST] 開始網路請求",
    "[2025-07-20T07:22:03.244Z] log: 🌐 [API-REQUEST] Platform: web",
    "[2025-07-20T07:22:03.244Z] log: 🌐 [API-REQUEST] __DEV__: true",
    "[2025-07-20T07:22:03.244Z] log: 🌐 [API-REQUEST] API_BASE_URL: http://localhost:8080/api",
    "[2025-07-20T07:22:03.245Z] log: 🌐 [API-REQUEST] Full URL: http://localhost:8080/api/jobs/61397c8b-9d9c-4b73-bbe4-25247eb5c23f",
    "[2025-07-20T07:22:03.245Z] log: 🌐 [API-REQUEST] Method: GET",
    "[2025-07-20T07:22:03.245Z] log: 🌐 [API-REQUEST] Body: none",
    "[2025-07-20T07:22:03.245Z] log: 🌐 [API-REQUEST] 發送 fetch 請求...",
    "[2025-07-20T07:22:03.246Z] error: Failed to load resource: net::ERR_CONNECTION_REFUSED",
    "[2025-07-20T07:22:03.246Z] error: 🌐 [API-REQUEST] 網路錯誤詳情: TypeError: Failed to fetch\n    at apiRequest (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210726:30)\n    at pollJobStatus (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210845:30)\n    at pollUntilComplete (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210891:30)\n    at async generateUnifiedLearningPlan (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:211061:25)\n    at async handleSmartGenerate (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:207347:33)",
    "[2025-07-20T07:22:03.246Z] error: 🌐 [API-REQUEST] Error type: TypeError",
    "[2025-07-20T07:22:03.246Z] error: 🌐 [API-REQUEST] Error message: Failed to fetch",
    "[2025-07-20T07:22:03.246Z] error: 🌐 [API-REQUEST] TypeError - 可能是網路連線問題",
    "[2025-07-20T07:22:03.246Z] error: ❌ [JOB-API] Failed to poll job 61397c8b-9d9c-4b73-bbe4-25247eb5c23f (attempt 1): ApiError: Network connection error\n    at apiRequest (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210791:15)\n    at async pollJobStatus (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210845:24)\n    at async pollUntilComplete (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210891:24)\n    at async generateUnifiedLearningPlan (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:211061:25)\n    at async handleSmartGenerate (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:207347:33)",
    "[2025-07-20T07:22:03.246Z] warning: ⚠️ [JOB-API] Poll attempt 2 failed for job 61397c8b-9d9c-4b73-bbe4-25247eb5c23f: ApiError: Network connection error\n    at apiRequest (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210791:15)\n    at async pollJobStatus (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210845:24)\n    at async pollUntilComplete (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:210891:24)\n    at async generateUnifiedLearningPlan (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:211061:25)\n    at async handleSmartGenerate (http://localhost:8082/node_modules/expo-router/entry.bundle?platform=web&dev=true&hot=false&lazy=true&transform.engine=hermes&transform.routerRoot=app&unstable_transformProfile=hermes-stable:207347:33)"
  ],
  "apiCalls": [
    {
      "url": "http://localhost:8080/api/jobs",
      "method": "POST",
      "status": 202,
      "response": {
        "jobId": "61397c8b-9d9c-4b73-bbe4-25247eb5c23f",
        "type": "learning_plan",
        "status": "pending",
        "estimatedDuration": 60000,
        "message": "正在創建包含具體步驟和資源的完整學習計劃...",
        "pollEndpoint": "/api/jobs/61397c8b-9d9c-4b73-bbe4-25247eb5c23f",
        "createdAt": "2025-07-20T07:22:00.203Z"
      },
      "timestamp": 1752996120214
    }
  ],
  "timestamp": 1752996123330
}