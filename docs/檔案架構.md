我來詳細介紹 FocusFlow 專案中每個檔案的用途和功能：

## 📱 前端應用程式 (React Native/Expo)

### 🏗️ 核心架構檔案

**`app.json`** - Expo 應用程式配置
- 應用程式名稱、版本、圖示設定
- 平台特定配置 (iOS/Android)
- 權限和功能設定

**`package.json`** - 專案依賴管理
- 所有 npm 套件和版本
- 腳本命令 (start, build, test)
- 專案元數據

**`tsconfig.json`** - TypeScript 配置
- 編譯選項和路徑映射
- 嚴格模式設定
- 目標版本和模組解析

**`metro.config.js`** - Metro 打包器配置
- React Native 打包設定
- 模組解析規則
- 快取和效能優化

### �� 主要應用程式檔案

**`app/_layout.tsx`** - 根佈局組件
- 全域導航設定
- 主題和語言提供者
- 狀態管理初始化

**`app/(tabs)/_layout.tsx`** - 標籤頁佈局
- 底部導航欄設定
- 標籤頁路由配置

**`app/(tabs)/index.tsx`** - 首頁
- 今日任務顯示
- 快速操作按鈕
- 任務統計概覽

**`app/(tabs)/tasks.tsx`** - 任務列表頁
- 所有任務的列表視圖
- 篩選和排序功能
- 任務管理操作

**`app/(tabs)/stats.tsx`** - 統計頁面
- 學習進度圖表
- 生產力統計
- AI 建議生成

**`app/(tabs)/profile.tsx`** - 個人資料頁
- 用戶設定
- 應用程式偏好
- 數據管理

**`app/add-task.tsx`** - 新增任務頁面 ⭐
- 任務創建表單
- AI 子任務生成
- 個人化問題處理
- 學習計劃生成

**`app/focus.tsx`** - 專注模式頁面
- 計時器功能
- 專注會話管理
- 進度追蹤

**`app/task-detail.tsx`** - 任務詳情頁
- 任務詳細資訊
- 子任務管理
- 進度更新

**`app/learning-feedback.tsx`** - 學習回饋頁
- 學習筆記記錄
- AI 問題生成
- 知識鞏固

**`app/onboarding.tsx`** - 新用戶引導
- 應用程式介紹
- 初始設定
- 權限請求

**`app/modal.tsx`** - 模態視窗
- 通用模態組件
- 彈出對話框

**`app/+not-found.tsx`** - 404 頁面
- 錯誤頁面處理
- 導航回主頁

### 🧩 組件檔案

**`components/Button.tsx`** - 按鈕組件
- 可重用的按鈕設計
- 多種樣式變體
- 載入狀態支援

**`components/TaskItem.tsx`** - 任務項目組件
- 任務卡片顯示
- 進度指示器
- 操作按鈕

**`components/SubtaskItem.tsx`** - 子任務組件
- 子任務詳細顯示
- 時間追蹤
- 完成狀態管理

**`components/FocusTimer.tsx`** - 專注計時器
- 倒數計時顯示
- 暫停/繼續控制
- 時間格式化

**`components/ProgressChart.tsx`** - 進度圖表
- 學習進度視覺化
- 統計數據圖表
- 互動式圖表

**`components/DatePicker.tsx`** - 日期選擇器
- 日期選擇介面
- 範圍限制
- 自定義樣式

**`components/TimeSlotPicker.tsx`** - 時間段選擇器
- 可用時間設定
- 每週排程
- 時間衝突檢測

**`components/WheelTimePicker.tsx`** - 滾輪時間選擇器
- 小時/分鐘選擇
- 滾輪介面
- 時間驗證

**`components/WeekCalendar.tsx`** - 週曆組件
- 週曆視圖
- 任務排程顯示
- 日期導航

**`components/ScheduleItem.tsx`** - 排程項目
- 排程任務顯示
- 時間段資訊
- 狀態指示

**`components/ReflectionModal.tsx`** - 反思模態框
- 學習反思記錄
- 問題回答介面
- 筆記編輯

**`components/CompanionView.tsx`** - AI 助手視圖
- AI 互動介面
- 進度鼓勵
- 智能建議

**`components/OnboardingStep.tsx`** - 引導步驟
- 引導頁面模板
- 步驟導航
- 內容展示

### 🏪 狀態管理

**`store/taskStore.ts`** - 任務狀態管理 ⭐
- 任務 CRUD 操作
- 子任務管理
- 學習筆記
- 間隔重複系統
- 排程任務管理

**`store/timerStore.ts`** - 計時器狀態
- 專注會話管理
- 時間追蹤
- 暫停/繼續狀態

**`store/settingsStore.ts`** - 設定狀態
- 用戶偏好
- 應用程式設定
- 語言和主題

**`store/statsStore.ts`** - 統計狀態
- 學習統計數據
- 生產力指標
- 進度追蹤

### 🛠️ 工具函數

**`utils/api.ts`** - API 通訊 ⭐
- HTTP 請求封裝
- 錯誤處理
- AI 服務調用
- 統一學習計劃 API

**`utils/ai.ts`** - AI 功能 (已棄用)
- 舊版 AI 調用
- 輸入品質評估
- 子任務生成

**`utils/scheduling.ts`** - 排程邏輯 ⭐
- 智能任務排程
- 時間衝突檢測
- 依賴關係處理
- 可行性分析

**`utils/spacedRepetition.ts`** - 間隔重複
- 學習記憶算法
- 複習排程
- 掌握度評估

**`utils/subtaskProgress.ts`** - 子任務進度
- 進度追蹤
- 時間分割
- 學習效率分析

**`utils/permissions.ts`** - 權限管理
- 通知權限
- 日曆權限
- 系統權限請求

**`utils/timeUtils.ts`** - 時間工具
- 時間格式化
- 日期計算
- 時間轉換

**`utils/appRestart.ts`** - 應用重啟
- 應用程式重啟邏輯
- 狀態重置

### �� 設計系統

**`constants/colors.ts`** - 顏色定義
- 主題色彩
- 語意色彩
- 深淺色模式

**`constants/theme.ts`** - 主題設定
- 間距和尺寸
- 字體設定
- 圓角和陰影

**`constants/i18n.ts`** - 國際化
- 多語言支援
- 翻譯管理
- 語言切換

### �� 測試檔案

**`__tests__/i18n.test.ts`** - 國際化測試
- 語言切換測試
- 翻譯完整性
- 錯誤處理

## 🖥️ 後端服務 (Node.js)

### 🏗️ 核心服務檔案

**`focusflow-backend/index.js`** - 後端入口
- Express 伺服器設定
- 路由註冊
- 中間件配置
- 錯誤處理

**`focusflow-backend/package.json`** - 後端依賴
- Node.js 套件管理
- 腳本命令
- 開發工具

### 🛣️ API 路由

**`focusflow-backend/routes/ai.js`** - AI API 路由 ⭐
- 子任務生成端點
- 學習計劃生成
- 個人化問題
- 統一學習計劃 API

### 🤖 AI 服務

**`focusflow-backend/lib/services/geminiService.js`** - Gemini AI 服務 ⭐
- Google Gemini API 整合
- 結構化輸出處理
- JSON 修復機制
- 錯誤處理和重試

**`focusflow-backend/lib/services/cacheService.js`** - 快取服務
- 智能快取系統
- 相似性匹配
- 記憶體和檔案快取

**`focusflow-backend/lib/services/batchProcessingService.js`** - 批量處理
- 請求批量合併
- 效率優化
- 成本節省

**`focusflow-backend/lib/services/costMonitoringService.js`** - 成本監控
- API 使用量追蹤
- 預算管理
- 速率限制

**`focusflow-backend/lib/services/compressionService.js`** - 內容壓縮
- 智能內容優化
- Token 節省
- 響應優化

### 📝 提示詞模板

**`focusflow-backend/lib/prompts/main_prompt.js`** - 主要提示詞
- 學習計劃生成模板
- 子任務生成提示
- 統一 API 提示詞

**`focusflow-backend/lib/prompts/personalization_prompt.js`** - 個人化提示詞
- 個人化問題生成
- 診斷提示詞
- 用戶分析模板

### �� 測試檔案

**`focusflow-backend/test_dynamic_subtasks.js`** - 動態子任務測試
- 子任務生成測試
- 內容複雜度分析
- 時間約束適應

### �� 文檔檔案

**`focusflow-backend/README.md`** - 後端文檔
- 安裝和設定
- API 文檔
- 部署指南

**`focusflow-backend/CONFIGURATION_GUIDE.md`** - 配置指南
- 環境變數設定
- 服務配置
- 最佳實踐

## 📋 專案文檔

**`COST_OPTIMIZATION_PHASE_2_COMPLETE.md`** - 成本優化報告
- 系統優化成果
- 性能指標
- 成本節省分析

**`DEBUG_ISSUES_SOLUTION.md`** - 除錯解決方案
- 問題診斷
- 修復方案
- 測試結果

**`DYNAMIC_SUBTASK_GENERATION_GUIDE.md`** - 動態子任務指南
- 新系統介紹
- 技術實現
- 使用指南

**`ENHANCED_COST_OPTIMIZATION_FINAL_REPORT.md`** - 增強成本優化報告
- Phase 2 完成報告
- 新增功能
- 性能對比

**`FIXES_SUMMARY.md`** - 修復總結
- React Key Props 修復
- API 安全性修復
- 組件結構現代化

**`SECURITY_FIXES_PHASE_1_COMPLETE.md`** - 安全修復報告
- API 金鑰保護
- 後端代理架構
- 安全改進

**`SECURITY_IMPROVEMENTS.md`** - 安全性改進
- 安全問題識別
- 改進方案
- 遷移指南

**`SECURITY_MIGRATION_GUIDE.md`** - 安全遷移指南
- 從不安全到安全架構
- 詳細遷移步驟
- 最佳實踐

## �� 核心功能檔案總結

### 最重要的檔案 (⭐ 標記)：

1. **`app/add-task.tsx`** - 任務創建核心邏輯
2. **`store/taskStore.ts`** - 任務狀態管理
3. **`utils/api.ts`** - 前端 API 通訊
4. **`utils/scheduling.ts`** - 智能排程算法
5. **`focusflow-backend/routes/ai.js`** - 後端 AI API
6. **`focusflow-backend/lib/services/geminiService.js`** - AI 服務核心

這些檔案構成了 FocusFlow 的核心功能，包括 AI 驅動的任務生成、智能排程、狀態管理和後端服務。